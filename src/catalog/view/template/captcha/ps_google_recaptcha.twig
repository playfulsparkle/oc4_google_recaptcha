<fieldset>
  <legend>{{ text_captcha }}</legend>
	<div class="{% if route|slice(0, 9) == 'checkout/' %}col{% else %}row{% endif %} mb-3 required">
		<label class="{% if route|slice(0, 9) == 'checkout/' %}form-label{% else %}col-sm-2 col-form-label{% endif %}" for="input-google-recaptcha">{% if key_type == 'v2_checkbox' %}{{ entry_challange_captcha }}{% else %}{{ entry_score_based_captcha }}{% endif %}</label>
		<div class="col-sm-10">
			{% if key_type == 'v2_checkbox' %}
			<div id="g-recaptcha-{{ widget_counter }}" data-sitekey="{{ site_key }}"></div>
			<script data-widget-id="{{ widget_counter }}">
				var recaptcha_form{{ widget_counter }} = document.currentScript ? document.currentScript.closest('form') : null;
				var recaptcha_widget{{ widget_counter }};

				var onloadCallback{{ widget_counter }} = function () {
					recaptcha_widget{{ widget_counter }} = grecaptcha.render('g-recaptcha-{{ widget_counter }}', {
						'sitekey': '{{ site_key }}',
						'theme': '{{ badge_theme }}',
						'size': '{{ badge_size }}'
					});
				};

				var resetRecaptcha{{ widget_counter }} = function () {
					if (window.grecaptcha && typeof grecaptcha.reset === 'function') {
						grecaptcha.reset(recaptcha_widget{{ widget_counter }});
					}
				};

				if (recaptcha_form{{ widget_counter }}) {
					recaptcha_form{{ widget_counter }}.addEventListener('submit', function () {
						setTimeout(resetRecaptcha{{ widget_counter }}, 1000);
					});
				}
			</script>
			<script src="https://www.google.com/recaptcha/api.js?onload=onloadCallback{{ widget_counter }}&render=explicit&badge={{ badge_position }}" async defer></script>
			{% endif %}
			<div id="error-captcha" class="invalid-feedback"></div>
		</div>
	</div>
</fieldset>
